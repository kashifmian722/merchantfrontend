import { __decorate } from "tslib";
/*
 * Copyright (c) 2016-2020 VMware, Inc. All Rights Reserved.
 * This software is released under MIT license.
 * The full license information can be found in LICENSE in the root directory of this project.
 */
import { Component, Input, HostBinding } from '@angular/core';
import { isBooleanAttributeSet } from '../../utils/component/is-boolean-attribute-set';
import { ClrAriaLiveService, ClrAriaLivePoliteness } from '../../utils/a11y/aria-live.service';
let ClrProgressBar = class ClrProgressBar {
    constructor(ariaLiveService) {
        this.ariaLiveService = ariaLiveService;
        this.externalId = '';
        // Progress
        this.max = 100;
        this._value = 0;
    }
    set id(value) {
        this._ID = value;
        this.externalId = null;
    }
    get id() {
        return this._ID;
    }
    get value() {
        return this._value;
    }
    set value(value) {
        this._value = value;
        if (this.displayAriaLive()) {
            this.ariaLiveService.announce(this.displayValue, this.ariaLive);
        }
    }
    // Styles
    get progressClass() {
        return true;
    }
    get labeledClass() {
        return this._labeled;
    }
    set clrLabeled(value) {
        this._labeled = isBooleanAttributeSet(value);
    }
    get fadeClass() {
        return this._fade;
    }
    set clrFade(value) {
        this._fade = isBooleanAttributeSet(value);
    }
    get loopClass() {
        return this._loop;
    }
    set clrLoop(value) {
        this._loop = isBooleanAttributeSet(value);
    }
    get successClass() {
        return this._success;
    }
    /** @deprecated since 2.0, remove in 4.0 */
    set clrSuccess(value) {
        this._success = isBooleanAttributeSet(value);
    }
    get dangerClass() {
        return this._danger;
    }
    /** @deprecated since 2.0, remove in 4.0 */
    set clrDanger(value) {
        this._danger = isBooleanAttributeSet(value);
    }
    get flashClass() {
        return this._flash;
    }
    set clrFlash(value) {
        this._flash = isBooleanAttributeSet(value);
    }
    get flashDangerClass() {
        return this._flashDanger;
    }
    /** @deprecated since 2.0, remove in 4.0 */
    set clrFlashDanger(value) {
        this._flashDanger = isBooleanAttributeSet(value);
    }
    /**
     * Make sure that we always will have something that is readable
     * for the screen reader
     */
    get displayValue() {
        if (this.displayval) {
            return this.displayval;
        }
        return `${this.value}%`;
    }
    /**
     * Display aria-live only when there is value and it's not 0 or equal to the max value
     */
    displayAriaLive() {
        return (this.value !== undefined || this.value !== 0) && this.value !== this.max;
    }
    get ariaLive() {
        if (isBooleanAttributeSet(this.assertive)) {
            return ClrAriaLivePoliteness.assertive;
        }
        if (isBooleanAttributeSet(this.off)) {
            return ClrAriaLivePoliteness.off;
        }
        return ClrAriaLivePoliteness.polite;
    }
};
ClrProgressBar.ctorParameters = () => [
    { type: ClrAriaLiveService }
];
__decorate([
    HostBinding('attr.id')
], ClrProgressBar.prototype, "externalId", void 0);
__decorate([
    Input()
], ClrProgressBar.prototype, "id", null);
__decorate([
    Input('clrMax')
], ClrProgressBar.prototype, "max", void 0);
__decorate([
    Input('clrDisplayval')
], ClrProgressBar.prototype, "displayval", void 0);
__decorate([
    Input('clrValue')
], ClrProgressBar.prototype, "value", null);
__decorate([
    HostBinding('class.progress')
], ClrProgressBar.prototype, "progressClass", null);
__decorate([
    HostBinding('class.labeled')
], ClrProgressBar.prototype, "labeledClass", null);
__decorate([
    Input('clrLabeled')
], ClrProgressBar.prototype, "clrLabeled", null);
__decorate([
    HostBinding('class.progress-fade')
], ClrProgressBar.prototype, "fadeClass", null);
__decorate([
    Input('clrFade')
], ClrProgressBar.prototype, "clrFade", null);
__decorate([
    HostBinding('class.loop')
], ClrProgressBar.prototype, "loopClass", null);
__decorate([
    Input('clrLoop')
], ClrProgressBar.prototype, "clrLoop", null);
__decorate([
    HostBinding('class.success')
], ClrProgressBar.prototype, "successClass", null);
__decorate([
    Input('clrSuccess')
], ClrProgressBar.prototype, "clrSuccess", null);
__decorate([
    HostBinding('class.danger')
], ClrProgressBar.prototype, "dangerClass", null);
__decorate([
    Input('clrDanger')
], ClrProgressBar.prototype, "clrDanger", null);
__decorate([
    HostBinding('class.flash')
], ClrProgressBar.prototype, "flashClass", null);
__decorate([
    Input('clrFlash')
], ClrProgressBar.prototype, "clrFlash", null);
__decorate([
    HostBinding('class.flash-danger')
], ClrProgressBar.prototype, "flashDangerClass", null);
__decorate([
    Input('clrFlashDanger')
], ClrProgressBar.prototype, "clrFlashDanger", null);
__decorate([
    Input('clrAssertive')
], ClrProgressBar.prototype, "assertive", void 0);
__decorate([
    Input('clrOff')
], ClrProgressBar.prototype, "off", void 0);
ClrProgressBar = __decorate([
    Component({
        providers: [ClrAriaLiveService],
        selector: 'clr-progress-bar',
        template: `
    <progress [id]="id" [attr.max]="max" [attr.value]="value" [attr.data-displayval]="displayValue"></progress>
    <span *ngIf="displayAriaLive()">{{ displayValue }}</span>
  `
    })
], ClrProgressBar);
export { ClrProgressBar };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvZ3Jlc3MtYmFyLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGNsci9hbmd1bGFyLyIsInNvdXJjZXMiOlsicHJvZ3Jlc3MvcHJvZ3Jlc3MtYmFycy9wcm9ncmVzcy1iYXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7O0dBSUc7QUFDSCxPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxXQUFXLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDOUQsT0FBTyxFQUFFLHFCQUFxQixFQUFFLE1BQU0sZ0RBQWdELENBQUM7QUFDdkYsT0FBTyxFQUFFLGtCQUFrQixFQUFFLHFCQUFxQixFQUFFLE1BQU0sb0NBQW9DLENBQUM7QUFVL0YsSUFBYSxjQUFjLEdBQTNCLE1BQWEsY0FBYztJQUN6QixZQUFvQixlQUFtQztRQUFuQyxvQkFBZSxHQUFmLGVBQWUsQ0FBb0I7UUFNL0IsZUFBVSxHQUFXLEVBQUUsQ0FBQztRQVVoRCxXQUFXO1FBQ00sUUFBRyxHQUFXLEdBQUcsQ0FBQztRQUczQixXQUFNLEdBQVcsQ0FBQyxDQUFDO0lBcEIrQixDQUFDO0lBUTNELElBQUksRUFBRSxDQUFDLEtBQWE7UUFDbEIsSUFBSSxDQUFDLEdBQUcsR0FBRyxLQUFLLENBQUM7UUFDakIsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUM7SUFDekIsQ0FBQztJQUNELElBQUksRUFBRTtRQUNKLE9BQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQztJQUNsQixDQUFDO0lBUUQsSUFBSSxLQUFLO1FBQ1AsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDO0lBQ3JCLENBQUM7SUFFRCxJQUFJLEtBQUssQ0FBQyxLQUFLO1FBQ2IsSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7UUFDcEIsSUFBSSxJQUFJLENBQUMsZUFBZSxFQUFFLEVBQUU7WUFDMUIsSUFBSSxDQUFDLGVBQWUsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7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MDIwIFZNd2FyZSwgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogVGhpcyBzb2Z0d2FyZSBpcyByZWxlYXNlZCB1bmRlciBNSVQgbGljZW5zZS5cbiAqIFRoZSBmdWxsIGxpY2Vuc2UgaW5mb3JtYXRpb24gY2FuIGJlIGZvdW5kIGluIExJQ0VOU0UgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgcHJvamVjdC5cbiAqL1xuaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgSG9zdEJpbmRpbmcgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IGlzQm9vbGVhbkF0dHJpYnV0ZVNldCB9IGZyb20gJy4uLy4uL3V0aWxzL2NvbXBvbmVudC9pcy1ib29sZWFuLWF0dHJpYnV0ZS1zZXQnO1xuaW1wb3J0IHsgQ2xyQXJpYUxpdmVTZXJ2aWNlLCBDbHJBcmlhTGl2ZVBvbGl0ZW5lc3MgfSBmcm9tICcuLi8uLi91dGlscy9hMTF5L2FyaWEtbGl2ZS5zZXJ2aWNlJztcblxuQENvbXBvbmVudCh7XG4gIHByb3ZpZGVyczogW0NsckFyaWFMaXZlU2VydmljZV0sXG4gIHNlbGVjdG9yOiAnY2xyLXByb2dyZXNzLWJhcicsXG4gIHRlbXBsYXRlOiBgXG4gICAgPHByb2dyZXNzIFtpZF09XCJpZFwiIFthdHRyLm1heF09XCJtYXhcIiBbYXR0ci52YWx1ZV09XCJ2YWx1ZVwiIFthdHRyLmRhdGEtZGlzcGxheXZhbF09XCJkaXNwbGF5VmFsdWVcIj48L3Byb2dyZXNzPlxuICAgIDxzcGFuICpuZ0lmPVwiZGlzcGxheUFyaWFMaXZlKClcIj57eyBkaXNwbGF5VmFsdWUgfX08L3NwYW4+XG4gIGAsXG59KVxuZXhwb3J0IGNsYXNzIENsclByb2dyZXNzQmFyIHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBhcmlhTGl2ZVNlcnZpY2U6IENsckFyaWFMaXZlU2VydmljZSkge31cblxuICAvKipcbiAgICogSGFuZGxlIGNvbXBvbmVudCBJRFxuICAgKi9cbiAgcHJpdmF0ZSBfSUQ6IHN0cmluZztcbiAgQEhvc3RCaW5kaW5nKCdhdHRyLmlkJykgZXh0ZXJuYWxJZDogc3RyaW5nID0gJyc7XG4gIEBJbnB1dCgpXG4gIHNldCBpZCh2YWx1ZTogc3RyaW5nKSB7XG4gICAgdGhpcy5fSUQgPSB2YWx1ZTtcbiAgICB0aGlzLmV4dGVybmFsSWQgPSBudWxsO1xuICB9XG4gIGdldCBpZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fSUQ7XG4gIH1cblxuICAvLyBQcm9ncmVzc1xuICBASW5wdXQoJ2Nsck1heCcpIG1heDogbnVtYmVyID0gMTAwO1xuICBASW5wdXQoJ2NsckRpc3BsYXl2YWwnKSBkaXNwbGF5dmFsOiBzdHJpbmc7XG5cbiAgcHJpdmF0ZSBfdmFsdWU6IG51bWJlciA9IDA7XG4gIEBJbnB1dCgnY2xyVmFsdWUnKVxuICBnZXQgdmFsdWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xuICB9XG5cbiAgc2V0IHZhbHVlKHZhbHVlKSB7XG4gICAgdGhpcy5fdmFsdWUgPSB2YWx1ZTtcbiAgICBpZiAodGhpcy5kaXNwbGF5QXJpYUxpdmUoKSkge1xuICAgICAgdGhpcy5hcmlhTGl2ZVNlcnZpY2UuYW5ub3VuY2UodGhpcy5kaXNwbGF5VmFsdWUsIHRoaXMuYXJpYUxpdmUpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFN0eWxlc1xuICBASG9zdEJpbmRpbmcoJ2NsYXNzLnByb2dyZXNzJylcbiAgZ2V0IHByb2dyZXNzQ2xhc3MoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwcml2YXRlIF9sYWJlbGVkOiBib29sZWFuO1xuICBASG9zdEJpbmRpbmcoJ2NsYXNzLmxhYmVsZWQnKVxuICBnZXQgbGFiZWxlZENsYXNzKCkge1xuICAgIHJldHVybiB0aGlzLl9sYWJlbGVkO1xuICB9XG5cbiAgQElucHV0KCdjbHJMYWJlbGVkJylcbiAgc2V0IGNsckxhYmVsZWQodmFsdWU6IGJvb2xlYW4gfCBzdHJpbmcpIHtcbiAgICB0aGlzLl9sYWJlbGVkID0gaXNCb29sZWFuQXR0cmlidXRlU2V0KHZhbHVlKTtcbiAgfVxuXG4gIHByaXZhdGUgX2ZhZGU6IGJvb2xlYW47XG4gIEBIb3N0QmluZGluZygnY2xhc3MucHJvZ3Jlc3MtZmFkZScpXG4gIGdldCBmYWRlQ2xhc3MoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2ZhZGU7XG4gIH1cblxuICBASW5wdXQoJ2NsckZhZGUnKVxuICBzZXQgY2xyRmFkZSh2YWx1ZTogYm9vbGVhbiB8IHN0cmluZykge1xuICAgIHRoaXMuX2ZhZGUgPSBpc0Jvb2xlYW5BdHRyaWJ1dGVTZXQodmFsdWUpO1xuICB9XG5cbiAgcHJpdmF0ZSBfbG9vcDogYm9vbGVhbjtcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5sb29wJylcbiAgZ2V0IGxvb3BDbGFzcygpIHtcbiAgICByZXR1cm4gdGhpcy5fbG9vcDtcbiAgfVxuXG4gIEBJbnB1dCgnY2xyTG9vcCcpXG4gIHNldCBjbHJMb29wKHZhbHVlOiBib29sZWFuIHwgc3RyaW5nKSB7XG4gICAgdGhpcy5fbG9vcCA9IGlzQm9vbGVhbkF0dHJpYnV0ZVNldCh2YWx1ZSk7XG4gIH1cblxuICBwcml2YXRlIF9zdWNjZXNzOiBib29sZWFuO1xuICBASG9zdEJpbmRpbmcoJ2NsYXNzLnN1Y2Nlc3MnKVxuICBnZXQgc3VjY2Vzc0NsYXNzKCkge1xuICAgIHJldHVybiB0aGlzLl9zdWNjZXNzO1xuICB9XG5cbiAgLyoqIEBkZXByZWNhdGVkIHNpbmNlIDIuMCwgcmVtb3ZlIGluIDQuMCAqL1xuICBASW5wdXQoJ2NsclN1Y2Nlc3MnKVxuICBzZXQgY2xyU3VjY2Vzcyh2YWx1ZTogYm9vbGVhbiB8IHN0cmluZykge1xuICAgIHRoaXMuX3N1Y2Nlc3MgPSBpc0Jvb2xlYW5BdHRyaWJ1dGVTZXQodmFsdWUpO1xuICB9XG5cbiAgcHJpdmF0ZSBfZGFuZ2VyOiBib29sZWFuO1xuICBASG9zdEJpbmRpbmcoJ2NsYXNzLmRhbmdlcicpXG4gIGdldCBkYW5nZXJDbGFzcygpIHtcbiAgICByZXR1cm4gdGhpcy5fZGFuZ2VyO1xuICB9XG5cbiAgLyoqIEBkZXByZWNhdGVkIHNpbmNlIDIuMCwgcmVtb3ZlIGluIDQuMCAqL1xuICBASW5wdXQoJ2NsckRhbmdlcicpXG4gIHNldCBjbHJEYW5nZXIodmFsdWU6IGJvb2xlYW4gfCBzdHJpbmcpIHtcbiAgICB0aGlzLl9kYW5nZXIgPSBpc0Jvb2xlYW5BdHRyaWJ1dGVTZXQodmFsdWUpO1xuICB9XG5cbiAgcHJpdmF0ZSBfZmxhc2g6IGJvb2xlYW47XG4gIEBIb3N0QmluZGluZygnY2xhc3MuZmxhc2gnKVxuICBnZXQgZmxhc2hDbGFzcygpIHtcbiAgICByZXR1cm4gdGhpcy5fZmxhc2g7XG4gIH1cblxuICBASW5wdXQoJ2NsckZsYXNoJylcbiAgc2V0IGNsckZsYXNoKHZhbHVlOiBib29sZWFuIHwgc3RyaW5nKSB7XG4gICAgdGhpcy5fZmxhc2ggPSBpc0Jvb2xlYW5BdHRyaWJ1dGVTZXQodmFsdWUpO1xuICB9XG5cbiAgcHJpdmF0ZSBfZmxhc2hEYW5nZXI6IGJvb2xlYW47XG4gIEBIb3N0QmluZGluZygnY2xhc3MuZmxhc2gtZGFuZ2VyJylcbiAgZ2V0IGZsYXNoRGFuZ2VyQ2xhc3MoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2ZsYXNoRGFuZ2VyO1xuICB9XG5cbiAgLyoqIEBkZXByZWNhdGVkIHNpbmNlIDIuMCwgcmVtb3ZlIGluIDQuMCAqL1xuICBASW5wdXQoJ2NsckZsYXNoRGFuZ2VyJylcbiAgc2V0IGNsckZsYXNoRGFuZ2VyKHZhbHVlOiBib29sZWFuIHwgc3RyaW5nKSB7XG4gICAgdGhpcy5fZmxhc2hEYW5nZXIgPSBpc0Jvb2xlYW5BdHRyaWJ1dGVTZXQodmFsdWUpO1xuICB9XG5cbiAgLy8gQXJpYSBMaXZlXG4gIC8qKiBAZGVwcmVjYXRlZCBzaW5jZSAzLjAsIHJlbW92ZSBpbiA0LjAgKi9cbiAgQElucHV0KCdjbHJBc3NlcnRpdmUnKSBhc3NlcnRpdmU6IGJvb2xlYW47XG4gIC8qKiBAZGVwcmVjYXRlZCBzaW5jZSAzLjAsIHJlbW92ZSBpbiA0LjAgKi9cbiAgQElucHV0KCdjbHJPZmYnKSBvZmY6IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIE1ha2Ugc3VyZSB0aGF0IHdlIGFsd2F5cyB3aWxsIGhhdmUgc29tZXRoaW5nIHRoYXQgaXMgcmVhZGFibGVcbiAgICogZm9yIHRoZSBzY3JlZW4gcmVhZGVyXG4gICAqL1xuICBnZXQgZGlzcGxheVZhbHVlKCkge1xuICAgIGlmICh0aGlzLmRpc3BsYXl2YWwpIHtcbiAgICAgIHJldHVybiB0aGlzLmRpc3BsYXl2YWw7XG4gICAgfVxuICAgIHJldHVybiBgJHt0aGlzLnZhbHVlfSVgO1xuICB9XG5cbiAgLyoqXG4gICAqIERpc3BsYXkgYXJpYS1saXZlIG9ubHkgd2hlbiB0aGVyZSBpcyB2YWx1ZSBhbmQgaXQncyBub3QgMCBvciBlcXVhbCB0byB0aGUgbWF4IHZhbHVlXG4gICAqL1xuICBkaXNwbGF5QXJpYUxpdmUoKSB7XG4gICAgcmV0dXJuICh0aGlzLnZhbHVlICE9PSB1bmRlZmluZWQgfHwgdGhpcy52YWx1ZSAhPT0gMCkgJiYgdGhpcy52YWx1ZSAhPT0gdGhpcy5tYXg7XG4gIH1cblxuICBnZXQgYXJpYUxpdmUoKTogQ2xyQXJpYUxpdmVQb2xpdGVuZXNzIHtcbiAgICBpZiAoaXNCb29sZWFuQXR0cmlidXRlU2V0KHRoaXMuYXNzZXJ0aXZlKSkge1xuICAgICAgcmV0dXJuIENsckFyaWFMaXZlUG9saXRlbmVzcy5hc3NlcnRpdmU7XG4gICAgfVxuICAgIGlmIChpc0Jvb2xlYW5BdHRyaWJ1dGVTZXQodGhpcy5vZmYpKSB7XG4gICAgICByZXR1cm4gQ2xyQXJpYUxpdmVQb2xpdGVuZXNzLm9mZjtcbiAgICB9XG4gICAgcmV0dXJuIENsckFyaWFMaXZlUG9saXRlbmVzcy5wb2xpdGU7XG4gIH1cbn1cbiJdfQ==